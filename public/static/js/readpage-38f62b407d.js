!function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(11)},,function(t,n,e){function o(t){var n,e=[],o=encodeURIComponent;for(n in t)e.push(o(String(n))+"="+o(String(t[n])));return e.join("&")}function i(t){var n=t||location.search.substr(1),e={};return n.split("&").forEach(function(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}),e}function a(t,n){var n=n||window.location.href.split("#")[0],e="object"==typeof t?o(t):t;return n+=(n.split("?")[1]?"&":"?")+e}function r(){for(var t,n,e,o=!1,i=["webkit","Moz","O",""],a=i.length,r=document.documentElement.style;a--;)if(i[a]){if(void 0!==r[i[a]+"AnimationName"]){switch(t=i[a],a){case 0:n=t.toLowerCase()+"AnimationStart",e=t.toLowerCase()+"AnimationEnd",o=!0;break;case 1:n="animationstart",e="animationend",o=!0;break;case 2:n=t.toLowerCase()+"animationstart",e=t.toLowerCase()+"animationend",o=!0}break}}else if(void 0!==r.animationName){t=i[a],n="animationstart",e="animationend",o=!0;break}return{supported:o,prefix:t,start:n,end:e}}function s(t,n,e,o){m.removeClass("msg-on");var i=$("#msg-cnt");i.length||($('<div id="msg-cnt" class="msg-cnt"></div>').appendTo(m),i=$("#msg-cnt")),n?i.attr("class","msg-cnt msg-type-"+n):i.attr("class","msg-cnt"),i.html("<span>"+t+"</span>").off("animationend"),m.addClass("msg-on");var e=e,a=o?1e3*o:1e3;window.setTimeout(function(){m.removeClass("msg-on"),e&&e()},a)}function c(t){window.location=g+"?dest="+encodeURIComponent(t||location.href)}function d(){return window.channelID&&/^\d+$/.test(channelID)?channelID:(window.channelID=h.cookie.get("mzl_channel")||"",channelID)}function l(){if(!window._hmt){var t=v["default"],n="";n=window.channelID?channelID:h.cookie.get("mzl_channel"),n&&v[n]&&(t=v[n]);var e=e||[];!function(){var n=document.createElement("script");n.src="//hm.baidu.com/hm.js?"+t;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),window._hmt=e}}function f(){var t=$("#app-link,.app-link");if(t.length){var n=h.getChn(),e=n.match("1600"),o=window.location.href.match("/index/app/channel/"),i="http://a.app.qq.com/o/simple.jsp?pkgname=com.zhulang.reader",a="https://app2.zhulang.com/app/download/",r="https://itunes.apple.com/us/app/id1128277830?l=zh&ls=1&mt=8";if(h.isMobile.Android()&&(t.data("android")&&t.attr("href",t.data("android")),t.data("apk")&&t.attr("href",t.data("apk")),e)){var c=t.attr("href");c.match("https")||(a+=c.split("/app/")[1],t.attr("href",a)),$(".app-bar").click(function(){var t=$(this).find(".app-link").attr("href");window.location=t})}h.isMobile.iOS()&&(t.data("ios")&&t.attr("href",t.data("ios")),e&&t.attr("href",r)),(h.isMobile.Weixin()||h.isMobile.QQ())&&!o&&(t.attr("href",i),$(".n-app").attr("href",i)),h.isMobile.Weibo()&&t.on("click",function(t){s("请在浏览器中打开下载",null,null,3)})}}function u(){var t=$(".verifyimg");t.length&&t.click()}var h={showMsg:s,goLogin:c,supportAnimate:r,supportTouch:"ontouchstart"in document.documentElement,io:{},regs:{},ui:{},chn:""},m=$("body"),g="//m.zhulang.com/login/index.html";h.getChn=function(){return h.chn?h.chn:(h.chn=h.cookie.get("mzl_channel")||"default",h.chn)},h.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Weixin:function(){return navigator.userAgent.match(/MicroMessenger/i)},QQ:function(){return navigator.userAgent.match(/QQ/)},Weibo:function(){return navigator.userAgent.match(/weibo/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},h.regs={mobi:/^(?:13|14|15|16|17|18|19)[\d]{9}$/,username:/^[a-zA-Z0-9][\w-]{2,30}$/,bankcard:/^[0-9](?:[\d]{21}|[\d]{20}|[\d]{19}|[\d]{18}|[\d]{17}|[\d]{16}|[\d]{15}|[\d]{14}|[\d]{13}|[\d]{12}|[\d]{11}|)$/,email:/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/},h.ui.cur=function(t,n,e){var t=$(t)||t,o=n||"cur";t.addClass(o).siblings().removeClass(o)},h.ui.ena=function(t){var n="disabled";t&&t.each(function(t){$(this).removeClass(n).removeAttr(n)})},h.ui.dis=function(t){var n="disabled";t&&t.each(function(t){$(this).attr(n,n).addClass(n)})},h.ui.loadimg=function(t,n){var t=$(t),e="imgLoadFlag";if(!t.data(e)){var o=t.find("img[data-src],img[data-bg]");o.length&&(o.each(function(){var t=$(this),n=t.data("src"),e=t.data("bg");n&&t.attr("src",n).removeAttr("data-src"),e&&t.css({"background-image":"url("+e+")"}).removeAttr("data-bg")}),t.data(e,1))}},h.ui.tab=function(t,n,e,o,i){var i=i||"click",a=$(t).find(n),r=$(e).find(o);a.on(i,function(t){var n=$(this),e=n.index(),i=r.eq(e),a=h.ui.cur;a(this,"cur"),i.show().siblings(o).hide(),n.blur(),h.ui.loadimg(i),t.preventDefault()})},h.io.serialize=o,h.io.parseUrl=i,h.io.addUrlParam=a,h.io.xssEscape=function(t){return t=String(null===t?"":t),t.replace(/&(?!\w+;)|["'<>\\]/g,function(t){switch(t){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return t}})},h.io.parseJson=function(t){try{if("object"==typeof t)return t;if("string"==typeof t)return JSON.parse(t)}catch(n){console.log("parseJson error \n org-data: \n "+t)}};r();!function(t){function n(){var t={};if(document.cookie){var n=document.cookie.split("; ");n.forEach(function(n,e,o){var i=n.split("="),a=i[0],r=i[1];t[a]=r})}return t}function e(t,n,e){if(t&&n){var o=encodeURIComponent(t)+"="+encodeURIComponent(n);return e&&(e.maxAge&&(o+="; max-age="+e.maxAge),e.path&&(o+="; path="+e.path),e.domain&&(o+="; domain="+e.domain),e.secure&&(o+="; secure")),document.cookie=o,o}return""}function o(t){return decodeURIComponent(n()[t])||null}function i(t){n()[t]&&(document.cookie=t+"=; max-age=0")}function a(){var t=n();for(var e in t)document.cookie=e+"=; max-age=0"}function r(t){return n()}function s(t){return t&&"string"==typeof t?t&&window.cookie?(window[t]=window.cookie,delete window.cookie,window[t]):void 0:window.cookie}t.cookie={getCookies:r,set:e,get:o,remove:i,clear:a,noConflict:s}}(h);var v={"default":"e5883283abd0285c634898e065e21499",200001:"93083ac76898fe363cd44a3b9c599716",200002:"59e10cf75029fe5d23a3c5b4068f18f9",160020:"59ebf7a83435c374ab6f94e9c1f58f5a",160021:"660c43db3a131fffa13832636259b95e",160023:"3fd1ba328e6b479dda5668344189cfe9",160024:"0d758ee64750c01ad7728fd460c30f0d",170120:"40b7afcd3a044cefe0cc8eb54b95f6a2"};$(function(){d(),$(".backicon").on("click",function(){window.history.go(-1)}),$(".verifyimg").on("click",function(){var t=$(this),n=t.attr("src").split("?");t.attr("src",n[0]+"?__t="+ +new Date)});var t=window.weixinShareImg||"https://s.zhulang.com/images/zl320v1.png";(h.isMobile.Weixin()||h.isMobile.QQ())&&(m.addClass("inwx"),m.prepend('<div id="zl-wx-share-img" style=" overflow:hidden; width:0px; height:0; margin:0 auto; position:absolute; top:-800px;"><img src="'+t+'"></div>')),$(".js-login,.js-log").on("click",function(){c()}),f(),l()}),h.io.refreshChar=u,t.exports=h},,,,,function(t,n,e){!function(e,o){"undefined"!=typeof t&&t.exports&&(n=t.exports=o(e,n))}(this,function(t,n){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var n=this.length>>>0,e=Number(arguments[1])||0;for(e=0>e?Math.ceil(e):Math.floor(e),0>e&&(e+=n);n>e;e++)if(e in this&&this[e]===t)return e;return-1}),n.prefix="",n._getPrefixedKey=function(t,n){return n=n||{},n.noPrefix?t:this.prefix+t},n.set=function(t,n,e){var o=this._getPrefixedKey(t,e);try{localStorage.setItem(o,JSON.stringify({data:n}))}catch(i){console&&console.warn("Lockr didn't successfully save the '{"+t+": "+n+"}' pair, because the localStorage is full.")}},n.get=function(t,n,e){var o,i=this._getPrefixedKey(t,e);try{o=JSON.parse(localStorage.getItem(i))}catch(a){o=localStorage[i]?{data:localStorage.getItem(i)}:null}return null===o?n:"object"==typeof o&&"undefined"!=typeof o.data?o.data:n},n.sadd=function(t,e,o){var i,a=this._getPrefixedKey(t,o),r=n.smembers(t);if(r.indexOf(e)>-1)return null;try{r.push(e),i=JSON.stringify({data:r}),localStorage.setItem(a,i)}catch(s){console.log(s),console&&console.warn("Lockr didn't successfully add the "+e+" to "+t+" set, because the localStorage is full.")}},n.smembers=function(t,n){var e,o=this._getPrefixedKey(t,n);try{e=JSON.parse(localStorage.getItem(o))}catch(i){e=null}return null===e?[]:e.data||[]},n.sismember=function(t,e,o){this._getPrefixedKey(t,o);return n.smembers(t).indexOf(e)>-1},n.getAll=function(){var t=Object.keys(localStorage);return t=t.filter(function(t){return-1!==t.indexOf(n.prefix)}),t.map(function(t){return n.get(t.substr(n.prefix.length))})},n.srem=function(t,e,o){var i,a,r=this._getPrefixedKey(t,o),s=n.smembers(t,e);a=s.indexOf(e),a>-1&&s.splice(a,1),i=JSON.stringify({data:s});try{localStorage.setItem(r,i)}catch(c){console&&console.warn("Lockr couldn't remove the "+e+" from the set "+t)}},n.rm=function(t){localStorage.removeItem(t)},n.flush=function(){localStorage.clear()},n})},,,function(t,n,e){function o(){var t=!1;$(r).on("click",".reward-btn,.flower-btn,.comment-btn",function(t){var n=$(this),e=n.data("url")||window.location.href;return window.userInfo&&userInfo.uid?void(e&&(window.location=e)):i.showMsg("请先登录~",0,i.goLogin(e))}).on("click",".add-fav, .add-tag",function(n){if(!window.userInfo||!userInfo.uid)return i.showMsg("请先登录~",0,i.goLogin);var e=$(this),o=e.data("api");e.hasClass("add-fav")?"已收藏至书架！":"书签已添加";t||e.hasClass("added")||(t=!0,$.ajax({url:o,type:"POST",success:function(t){var n=i.io.parseJson(t);if(0==n.code)i.showMsg(n.msg||"收藏成功！"),e.addClass("added"),e.hasClass("add-fav")&&e.find("span").text("已收藏");else{if(-400==n.code)return i.showMsg("请先登录~",0,i.goLogin);i.showMsg("添加失败，请稍后再试")}},error:function(t){i.showMsg("网络不给力，稍后再试")},complete:function(){t=!1}}))})}var i=e(2),a={init:o},r=document;t.exports=a},function(t,n,e){var o=e(12),i=e(10);o.init(),i.init()},function(t,n,e){function o(){setTimeout(function(){var t=["fstep-"+at.cur,tt.cur,"page-"+F,"rd-"+X];U.set(R,t.join(","),{path:"/",maxAge:31104e3})},100)}function i(t){j.set(J+K.bid,{bid:K.bid,chid:K.chid,url:window.location.href.split("?")[0].split("#")[0],pos:t||0,chname:K.chname,time:1*new Date}),localStorage.length>=Q&&r()}function a(){for(var t in localStorage)t.match(J)&&j.rm(t)}function r(){a()}function s(){var t=$(".rd-app-bar");if(t.length){var n="btm-ad",e="__zl-btm-key",o=U.get(e);"undefined"==o&&(console.log("addClass"),setTimeout(function(){et.addClass(n)},1e3)),t.find(".cls,a").on("click",function(o){et.removeClass(n);var i=t.data("exp")||86400;U.set(e,"1",{path:"/",maxAge:i})})}}function c(t){$(t).addClass("cur").siblings().removeClass("cur")}function d(){$("#fn-btm").on("click","li.li-down",function(t){t.preventDefault();var n=navigator.userAgent,e="目前支持iOS和安卓系统",o=$(this);return/Windows Phone|webOS|BlackBerry/i.test(n)?void B.showMsg(e):/MicroMessenger/i.test(n)?void B.showMsg("请在浏览器中打开本页"):/windows|win32|Android/i.test(n)?void(window.location=o.data("apk")):/AppleWebKit.*Mobile/i.test(n)||/macintosh|mac os x/i.test(n)?void(window.location=o.data("ipa")):void B.showMsg(e)})}function l(){$("#tip-bg").length||et.append('<div class="tip-bg" id="tip-bg"></div>');var t=U.get(rt);"undefined"==t&&(et.removeClass("tip-off").addClass("tip-on"),H=!0);var n="ontouchstart"in document.documentElement?"touchstart":"click";ot.on(n,function(t){if(H){et.removeClass("tip-on").addClass("tip-off");var n=U.get(rt),e=F;e="undefined"==n?e:e+n,U.set(rt,e,{path:"/",maxAge:31104e3}),H=!1}})}function f(){ot.on("click",".fn-div",function(t){H||(t.preventDefault(),et.toggleClass("fn-on").removeClass("cfg-on").removeClass("idx-on"),V=!1)}).on("touchmove",function(t){et.removeClass("cfg-on").removeClass("fn-on")})}function u(){$(".fb-icon").on("click","li>a, li>div",function(){var t=$(this),n=t.find(".icon");n.addClass("icon-taped"),setTimeout(function(){n.removeClass("icon-taped")},500)}),$("#fn-btm").on("click","li.li-cfg div",function(t){return t.preventDefault(),et.toggleClass("cfg-on"),!1}),$(window).on("resize orientationchange",function(t){et.removeClass("cfg-on").removeClass("fn-on"),"lr"==F&&S(Z)})}function h(){$("#idx-hdl").one("click",function(){g(),k(),m()}).on("click",function(t){$("#idx-cnt").removeAttr("style"),et.toggleClass("idx-on").removeClass("cfg-on"),V=!V,!V||ct||dt||g(),t.stopPropagation()}),$("#idx-cnt").on("click","h2 .icon",function(){var t=$("#idx-cnt").find(".idx-div");t.toggleClass("idx-rvt")})}function m(){$("#idx-cnt li a").off("touchstart touchmove touchend").on("touchstart",function(t){lt=$(this).data("href")}).on("touchmove",function(t){lt=null}).on("touchend",function(t){var n=$(this),e=n.data("href");return e?void(e==lt?window.location=e:lt=null):void(lt=null)})}function g(){if(!ct&&!dt){dt=!0;var t="/read/getList/book_id/"+window.bookInfo.bid+"/ch_id/"+window.bookInfo.chid+".html";$.ajax({url:t,type:"GET",dataType:"json",success:function(t){p(t),ct=!0,dt=!1},error:function(t){v(),ct=!0,dt=!1}})}}function v(t){B.showMsg(t||"网络不给力，稍后重试~"),et.removeClass("idx-on"),V=!1,ct=!1,dt=!1}function p(t){function n(t){return"<li"+(t.ch_id==window.bookInfo.chid?' class="cur"':"")+'><a data-href="'+("/"+window.bookInfo.bid+"/"+t.ch_id+".html")+'"><span>'+t.ch_name+"</span>"+(1*t.ch_vip?'<i class="icon icon-chag">VIP</i>':'<i class="icon icon-free">免费</i>')+"</a></li>"}t||v();for(var e=$("#idx-cnt"),o=e.find("ul.ul-odr"),i=e.find("ul.ul-rvt"),a=[],r=[],s=(window.location.href,0);s<t.asc.length;s++)a.push(n(t.asc[s]));for(var c=0;c<t.desc.length;c++)r.push(n(t.desc[c]));o.prepend(a.join("")),i.prepend(r.join("")),e.data("idxloaded",!0),m()}function w(t,n){var e=at.range,t=1*t;if("number"==typeof t&&(0>t&&(t=0),t>e&&(t=e),0==t?ht.addClass("disabled"):ht.removeClass("disabled"),t==e?ut.addClass("disabled"):ut.removeClass("disabled"),t==at.dft?mt.addClass("cur"):mt.removeClass("cur"),at.cur=t,!n)){var o=$("body"),i=o.attr("class"),a=i.replace(/\s*fstep-\d\s*/g," fstep-"+t+" ");o.attr("class",a),S(Z)}}function b(){ft.on("click","menuitem",function(t){t.preventDefault();var n=$(this),e=at.cur,o=at.dft;n.hasClass("disabled")||n.hasClass("cur")||(n.hasClass("fs-add")&&w(e+1),n.hasClass("fs-rdu")&&w(e-1),n.hasClass("fs-dft")&&w(o))})}function x(){$("#cfg-mode").on("click","menuitem",function(t){var n=$(this);if(!n.hasClass("cur")){var e=n.hasClass("mode-lr"),o=nt;c(n),et.removeClass("fn-on cfg-on");var i=U.get(rt);e?(F="lr",et.addClass("page-lr"),S(),i.indexOf(F)<0&&(et.removeClass("tip-off").addClass("tip-on"),H=!0)):(F="ud",Y=1,et.removeClass("page-lr"),o.removeAttr("style"),i.indexOf(F)<0&&(et.removeClass("tip-off").addClass("tip-on"),H=!0))}})}function C(){var t=$("#cfg-bg");t.on("click","menuitem",function(t){t.preventDefault();var n=$(this);if(!n.hasClass("cur")){tt.cur=n.data("cls");var e=" "+tt.cur+" ",o=$("body"),i=o.attr("class"),a=i.replace(/\s*bg-\d\s*/g,e);o.attr("class",a),n.addClass("cur").siblings("menuitem").removeClass("cur")}});var n=$("#fn-btm");n.on("click","li.night div",function(t){t.preventDefault(),$("body").removeClass("rd-day").addClass("rd-night"),X="night",o()}).on("click","li.day div",function(t){t.preventDefault(),$("body").removeClass("rd-night").addClass("rd-day"),X="day",o()})}function y(){window.onbeforeunload=function(){o()},$("#cfg-pnl menuitem").on("click",function(){o()})}function k(){function t(t){var n=B.isMobile.iOS();return t?void(n&&N?$(s).off("transitionend").on("transitionend",function(t){et.removeClass("idx-on"),$(s).removeAttr("style").off("transitionend"),V=!1}):setTimeout(function(){et.removeClass("idx-on"),$(s).removeAttr("style"),V=!1},i)):void(n&&N?$(s).off("transitionend").on("transitionend",function(t){et.addClass("idx-on"),$(s).removeAttr("style").off("transitionend"),V=!0}):setTimeout(function(){et.addClass("idx-on"),$(s).removeAttr("style"),V=!0},i))}var n={},e={},o={stopPropagation:!0},i=200,a=!1,r=$("#idx-cnt").find(".idx-div").get(0),s=document.getElementById("idx-cnt"),c=s.getBoundingClientRect().width||s.offsetWidth,d=function(){},l=function(t){setTimeout(t||d,0)},f={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":l(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":l(this.transitionEnd(t))}o.stopPropagation&&t.stopPropagation()},start:function(t){if(V){var o=t.touches[0];n={x:o.pageX,y:o.pageY,time:+new Date},a=void 0,e={},r.addEventListener("touchmove",this,!1),r.addEventListener("touchend",this,!1)}},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){o.disableScroll&&t.preventDefault();var i=t.touches[0];if(e={x:i.pageX-n.x,y:i.pageY-n.y},"undefined"==typeof a&&(a=!!(a||Math.abs(e.x)<Math.abs(e.y))),!a&&V){if(t.preventDefault(),e.x>0){var r=Math.round(100*Math.min(e.x/c,0));M(s,0,r+"%",0)}if(e.x<0){var r=Math.round(100*Math.max(e.x/c,-.89));M(s,0,r+"%",0)}}}},end:function(o){var d=+new Date-n.time,l=Number(d)<250&&Math.abs(e.x)>20||Math.abs(e.x)>c/4,u=V&&e.x>0||!V&&e.x<0;if(!a){if(u){if(V&&e.x>0)return;return void(!V&&e.x<0)}l?(e.x>0&&M(s,0,0,0),e.x<0&&(M(s,i,"-89%",0),t(!0))):(M(s,i,0,0),t(!1))}r.removeEventListener("touchmove",f,!1),r.removeEventListener("touchend",f,!1)}};r.addEventListener("touchstart",f,!1)}function M(t,n,e,o,i){$(t).css("-webkit-transition","-webkit-transform "+n+"ms ease"),$(t).css("-o-transition","-o-transform "+n+"ms ease"),$(t).css("-moz-transition","-moz-transform "+n+"ms ease"),$(t).css("-ms-transition","-ms-transform "+n+"ms ease"),$(t).css("transition","transform "+n+"ms ease");var a="number"==typeof e?e+"px":e,r="number"==typeof o?o+"px":o;$(t).css("-webkit-transform","translate3d("+a+", "+r+",0)"),$(t).css("-moz-transform","translate3d("+a+", "+r+",0)"),$(t).css("-o-transform","translate3d("+a+", "+r+",0)"),$(t).css("-ms-transform","translate3d("+a+", "+r+",0)"),$(t).css("transform","translate3d("+a+", "+r+",0)"),"function"==typeof i&&setTimeout(i,n)}function A(t,n){var e=$(window).width(),o="#rd-txt",a=t||Y,r=n||0;G=-e*(a-1),M(o,r,G,0),i((a/q).toFixed(2))}function S(t){if("lr"==F){var n=nt,e=$("#page-nav"),o=$(window).width(),i=B.isMobile.iOS()?window.innerHeight:$(window).height();n.css({height:i,width:o}),q=Math.ceil(document.getElementById("rd-txt").scrollWidth/o),t&&(Y=Math.max(Math.floor(t*q),1),A(Y,0)),e.html(Y+"/"+q),window.scrollTo(0,1)}}function I(){var t=$("#prev-url");if(t.length){var n=t.val();n&&(n=n.split("#")[0],n=B.io.addUrlParam({zref:"prev"},n),n+="#zrpos=1",window.location.href=n)}}function E(){var t=$("#next-url");if(t.length){var n=t.val();n&&(window.location.href=n)}}function _(t){return et.removeClass("fn-on cfg-on"),Y--,0>=Y?(Y=1,I()):(Z=(Y/q).toFixed(2),A(Y,t||400),void S())}function T(t){return et.removeClass("fn-on cfg-on"),Y++,Y>q?(Y=q,E()):(Z=(Y/q).toFixed(2),A(Y,t||400),void S())}function z(){var t=et.hasClass("cfg-on");return t&&et.removeClass("cfg-on").removeClass("fn-on"),t}function O(){ot.on("click","div",function(t){if(!H){var n=$(this);return n.hasClass("pg-lft")&&!z()&&_(),n.hasClass("pg-rit")&&!z()&&T(),!1}})}function P(t){var n=et.scrollTop(),e=$(window).height(),o=it.height();et.height();n>0?et.scrollTop(n-(e-o)):I()}function D(t){var n=et.scrollTop(),e=$(window).height(),o=it.height(),i=et.height();i>n+e?et.scrollTop(n+(e-o)):E()}function L(){ot.on("click",".pg-up",function(t){return!z()&&P(),!1}).on("click",".pg-dn",function(t){return!z()&&D(),!1})}var B=e(2),j=e(7),N=B.supportAnimate().supported,W=B.io.parseUrl,R=(/BlackBerry|Windows Phone/i.test(navigator.userAgent),"__zwReadCfg"),U=B.cookie,J="zreadPos_",K=window.bookInfo,Q=100,q=1,F="",X="",Y=1,Z=0,G=0,H=!1,V=!1,tt={cur:"bg-2"},nt=(window.location.href.split("?")[0].split("#")[0],$("#rd-txt")),et=$("body"),ot=$("#tap-hdl"),it=$("#rd-top"),at={range:6,cur:3,dft:3},rt="__zwTS",st={init:function(){this.formatPage(),this.reactCtls()},formatPage:function(){var t="#__zrposed",n=window.location.hash,e=et.attr("class"),o=W(),i=n==t;o&&"prev"==o.zref;if(!i){var a=W(window.location.href.split("#")[1]),r=a&&a.zrpos;1*r&&(r=Math.abs(1*r),Z=Math.max(Math.min(1,r),0),history.pushState(null,null,t))}et.hasClass("page-lr")?(F="lr",S(Z),c($("#cfg-mode").find(".mode-lr"))):(F="ud",c($("#cfg-mode").find(".mode-ud")),Z&&et.scrollTop(et.height()*Z-32)),X=et.hasClass("rd-night")?"night":"day";var s=e.match(/fstep-\d/);w(s?s[0].split("-")[1]:3,"noset");var d=e.match(/bg-\d/);d=d?d[0].split("-")[1]:2,tt.cur="bg-"+d,c($("#cfg-bg").find(".bg-"+d));var l=B.cookie,f="mzl_channel",u=l.get(f);u&&$("html").addClass("chn-"+u)},clearRead:function(){et.removeClass("fn-on").removeClass("cfg-on").removeClass("idx-on"),V=!1},reactCtls:function(){l(),u(),f(),h(),b(),C(),x(),y(),O(),L(),d(),s()}},ct=$("#idx-cnt").data("idxloaded")||!1,dt=!1,lt=null,ft=$("#cfg-font"),ut=ft.find(".fs-add"),ht=ft.find(".fs-rdu"),mt=ft.find(".fs-dft");(function(){var t={},n={},e={stopPropagation:!0},o=!1,i=document.getElementById("tap-hdl"),a=document.getElementById("rd-txt"),r=i.getBoundingClientRect().width||i.offsetWidth,s=$(i).height(),c=function(){},d=function(t){setTimeout(t||c,0)},l=0,f=0,u={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":d(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(t))}e.stopPropagation&&t.stopPropagation()},start:function(e){if(!V&&!H){var a=e.touches[0];t={x:a.pageX,y:a.pageY,time:+new Date},o=void 0,n={},i.addEventListener("touchmove",this,!1),i.addEventListener("touchend",this,!1)}},move:function(i){if(!(i.touches.length>1||i.scale&&1!==i.scale)){e.disableScroll&&i.preventDefault();var r=i.touches[0];if(n={x:r.pageX-t.x,y:r.pageY-t.y},"undefined"==typeof o&&(o=!!(o||Math.abs(n.x)<Math.abs(n.y))),!o&&"lr"==F){if(i.preventDefault(),1==Y&&n.x>0)return;if(Y==q&&n.x<0)return;M(a,0,G+n.x,0)}}},end:function(e){var a=+new Date-t.time,c=!1;if("lr"==F&&(c=Number(a)<250&&Math.abs(n.x)>20||Math.abs(n.x)>r/4),"ud"==F&&(c=Number(a)<250&&Math.abs(n.y)>20||Math.abs(n.y)>s/4),!o&&"lr"==F){var d=1==Y&&n.x>0||Y==q&&n.x<0;if(d)return void(1==Y&&n.x>0?I():Y==q&&n.x<0&&E());c?(n.x>0&&_(200),n.x<0&&T(200)):A(Y,200)}if(o&&"ud"==F){var h=$(window);n.y<0&&(f--,f=Math.max(f,0)),n.y>0&&(l--,l=Math.max(l,0)),n.y<0&&et.scrollTop()+h.height()>=et.height()&&(l++,l>=2&&E()),n.y>0&&et.scrollTop()<=0&&(f++,f>=2&&I())}i.removeEventListener("touchmove",u,!1),i.removeEventListener("touchend",u,!1)}};i.addEventListener("touchstart",u,!1)})();console.log("readCtl inited @ "+ +new Date),t.exports=st}]);